---
# Core Configuration
start_time: "2024-11-01T00:00:00Z"
end_time: "2025-01-01T00:00:00Z"

# Global Settings
correlation:
  enabled: true
  id_field: "req_id"
  propagation:
    headers: ["X-Request-ID", "X-Correlation-ID"]
    databases: true
    logs: true

# Holiday Traffic Patterns
seasonal_patterns:
  enabled: true
  base_volume: 1000  # requests per minute
  variation_enabled: true
holiday_patterns:
  thanksgiving_period:
    pre_thanksgiving_week:
      dates: "2024-11-18/2024-11-27"
      traffic_patterns:
        base_multiplier: 0.7
        shopping_at_work_factor: 1.8
        daily_decay: 0.1
      error_conditions:
        base_rate: 0.025
        response_time_multiplier: 1.3
        
    thanksgiving_day:
      date: "2024-11-28"
      phases:
        morning:
          pattern: "very_low"
          multiplier: 0.2
        afternoon:
          pattern: "minimal"
          multiplier: 0.1
        evening:
          start_time: "18:00"
          pattern: "exponential_rise"
          volume_multiplier: 3.0
          error_rate: 0.045
      incident_response:
        team_availability: 0.3
        response_time_multiplier: 3.0
        escalation_delay: "40m"
    black_friday:
      date: "2024-11-29"
      phases:
        midnight_rush:
          hours: ["00:00", "03:59"]
          pattern: "sustained_high"
          volume_multiplier: 3.5
          error_rate: 0.06
        early_morning:
          hours: ["04:00", "08:59"]
          pattern: "sharp_spike"
          volume_multiplier: 5.0
          error_rate: 0.08
        main_day:
          hours: ["09:00", "21:59"]
          pattern: "sustained_very_high"
          volume_multiplier: 4.0
          error_rate: 0.05
        evening_decline:
          hours: ["22:00", "23:59"]
          pattern: "gradual_decline"
          volume_multiplier: 2.5
          error_rate: 0.04
      system_conditions:
        cache_hit_ratio: 0.65  # Lower than normal
        database_load: "high"
        autoscaling_delay: "15m"
      incident_factors:
        skeleton_crew: true
        response_time: "degraded"
        escalation_path: "limited"
    cyber_monday:
      date: "2024-12-02"
      phases:
        early_morning:
          hours: ["00:00", "05:59"]
          pattern: "building_momentum"
          volume_multiplier: 2.0
          error_rate: 0.03
        work_hours:
          hours: ["06:00", "16:59"]
          pattern: "sustained_peak"
          volume_multiplier: 6.0
          error_rate: 0.07
          shopping_at_work_factor: 2.5
        evening:
          hours: ["17:00", "23:59"]
          pattern: "elevated_decline"
          volume_multiplier: 3.0
          error_rate: 0.04
      traffic_characteristics:
        mobile_ratio: 0.45
        desktop_ratio: 0.55
        cart_size_multiplier: 1.8
      system_load:
        database_connections: "near_limit"
        cache_pressure: "extreme"
        api_latency_increase: 1.6
      security_patterns:
        bot_traffic_multiplier: 2.0
        ddos_likelihood: "elevated"
        fraud_attempt_rate: 0.02
    december_shopping:
      early_december:
        dates: "2024-12-03/2024-12-15"
        weekly_pattern:
          weekday:
            base_multiplier: 1.8
            lunch_hour_spike: 2.2
            evening_multiplier: 2.0
          weekend:
            base_multiplier: 2.5
            peak_hours: ["13:00", "17:00"]
            peak_multiplier: 3.0
        error_conditions:
          base_rate: 0.035
          peak_rate: 0.045
          
      mid_december_rush:
        dates: "2024-12-16/2024-12-23"
        daily_pattern:
          morning:
            hours: ["09:00", "11:59"]
            multiplier: 2.5
          afternoon:
            hours: ["12:00", "16:59"]
            multiplier: 3.0
          evening:
            hours: ["17:00", "23:59"]
            multiplier: 3.5
        shipping_deadline_effect:
          dates: ["2024-12-20", "2024-12-21"]
          multiplier: 4.0
          panic_buying_factor: 1.5
    christmas_period:
      christmas_eve:
        date: "2024-12-24"
        phases:
          morning:
            hours: ["09:00", "12:59"]
            pattern: "last_minute_rush"
            volume_multiplier: 2.0
          afternoon:
            hours: ["13:00", "16:59"]
            pattern: "rapid_decline"
            volume_multiplier: 0.8
          evening:
            hours: ["17:00", "23:59"]
            pattern: "minimal"
            volume_multiplier: 0.2
            
      christmas_day:
        date: "2024-12-25"
        base_multiplier: 0.1
        mobile_ratio: 0.8
        gift_card_redemption_spike:
          start_time: "10:00"
          duration: "4h"
          multiplier: 1.5

    post_christmas:
      returns_period:
        dates: "2024-12-26/2024-12-31"
        daily_pattern:
          base_multiplier: 2.0
          customer_service_load: "very_high"
          return_processing_delay: "48h"
        system_focus:
          returns_processing: true
          inventory_rebalancing: true
          year_end_maintenance: true
monitoring_and_alerts:
  high_traffic_thresholds:
    warning_threshold: 
      multiplier: 1.5
      duration: "5m"
    critical_threshold:
      multiplier: 2.5
      duration: "10m"
    emergency_threshold:
      multiplier: 4.0
      duration: "3m"

  error_rate_monitoring:
    baseline_period: "3h"
    thresholds:
      warning: 0.05
      critical: 0.08
      emergency: 0.12
    exclusions:
      - bot_traffic
      - health_checks
      - monitoring_endpoints

  performance_metrics:
    response_time:
      p95_threshold: "2s"
      p99_threshold: "5s"
      alert_window: "5m"
    database_latency:
      warning_threshold: "500ms"
      critical_threshold: "1s"
    cache_performance:
      hit_ratio_minimum: 0.60
      alert_delay: "3m"

  system_health:
    autoscaling_groups:
      scale_up_threshold: 0.75
      scale_down_threshold: 0.25
      cooldown_period: "5m"
    database_connections:
      warning_percent: 80
      critical_percent: 90
    memory_utilization:
      warning_threshold: 85
      critical_threshold: 95

  incident_management:
    paging_rules:
      business_hours:
        start: "09:00"
        end: "17:00"
        team: "primary-sre"
      after_hours:
        team: "on-call-rotation"
    escalation_paths:
      - level: "L1"
        delay: "5m"
      - level: "L2"
        delay: "15m"
      - level: "Management"
        delay: "30m"
reporting_and_analytics:
  real_time_dashboards:
    refresh_rate: "30s"
    metrics:
      - name: "requests_per_second"
        aggregation: "avg"
        window: "1m"
      - name: "error_rate"
        aggregation: "sum"
        window: "5m"
      - name: "response_time"
        aggregation: "p95"
        window: "5m"
      - name: "active_users"
        aggregation: "count_distinct"
        window: "1m"

  historical_analysis:
    retention_periods:
      raw_data: "7d"
      hourly_aggregates: "90d"
      daily_aggregates: "365d"
      monthly_aggregates: "5y"
    
    comparison_metrics:
      - name: "year_over_year"
        window: "1d"
        lookback: "365d"
      - name: "week_over_week"
        window: "1h"
        lookback: "7d"

  business_metrics:
    key_indicators:
      - name: "conversion_rate"
        calculation: "purchases / sessions"
        threshold: 0.025
      - name: "average_order_value"
        calculation: "revenue / purchases"
        threshold: 85.00
      - name: "cart_abandonment"
        calculation: "abandoned_carts / total_carts"
        threshold: 0.70

  automated_reports:
    daily_summary:
      delivery_time: "06:00"
      recipients: ["ops-team@example.com", "management@example.com"]
      metrics:
        - traffic_summary
        - error_rates
        - performance_stats
        - business_kpis
    
    incident_reports:
      trigger_conditions:
        - error_rate_above: 0.05
        - response_time_above: "5s"
        - availability_below: 0.995
      format: "pdf"
      distribution_list: "incidents@example.com"

  data_exports:
    formats:
      - csv
      - json
      - parquet
    scheduling:
      frequency: "daily"
      retention: "90d"
    destinations:
      - type: "s3"
        bucket: "analytics-exports"
      - type: "bigquery"
        dataset: "ecommerce_metrics"
capacity_planning:
  infrastructure_scaling:
    web_tier:
      base_instances: 10
      max_instances: 50
      scaling_strategy:
        cpu_threshold: 70
        memory_threshold: 80
        request_rate_threshold: 1000
    database_tier:
      read_replicas:
        base_count: 2
        max_count: 5
      connection_pool:
        min_size: 20
        max_size: 200
    cache_tier:
      memory_allocation: "64Gi"
      sharding:
        enabled: true
        shard_count: 4

  load_testing:
    schedules:
      - name: "pre_thanksgiving"
        date: "2024-11-15"
        duration: "4h"
        target_rps: 2000
      - name: "pre_black_friday"
        date: "2024-11-25"
        duration: "6h"
        target_rps: 5000

disaster_recovery:
  backup_strategy:
    database:
      full_backup:
        frequency: "daily"
        retention: "30d"
        time: "03:00"
      incremental_backup:
        frequency: "4h"
        retention: "7d"
    
    application_state:
      backup_frequency: "6h"
      includes:
        - user_sessions
        - shopping_carts
        - order_status
  
  failover:
    rto_target: "15m"
    rpo_target: "5m"
    regions:
      primary: "us-east-1"
      secondary: "us-west-2"
    automated_testing:
      frequency: "monthly"
      last_test_date: "2024-10-15"

  recovery_procedures:
    communication:
      primary_channel: "slack"
      backup_channel: "sms"
      stakeholder_list: "dr_contacts.yml"
    
    runbooks:
      - name: "database_failover"
        path: "/runbooks/dr/db-failover.md"
      - name: "application_recovery"
        path: "/runbooks/dr/app-recovery.md"
      - name: "network_rerouting"
        path: "/runbooks/dr/network-reroute.md"
